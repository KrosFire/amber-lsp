---
source: tests/grammar/alpha034.rs
expression: "parse(r#\"\n        // comments\n        // comments\n\n        import {} from \"test.ab\";\n\n        fun test_cat_cmd(file: Text): CmdText {\n            return `echo \"NOT READY\" > {file}`\n        }\n\n        fun foo(a) {\n            return \"echo \\\"{5 + 5}\\\"\";\n        }\n\n        unsafe {\n            let x = 5;\n\n            echo x;\n\n            if {\n                2 == 2 {\n                    echo 3\n                }\n                else: 5\n            }\n        }\n    \"#)"
---
(
    Some(
        [
            (
                Statement(
                    (
                        Comment(
                            " comments\n",
                        ),
                        9..21,
                    ),
                ),
                9..21,
            ),
            (
                Statement(
                    (
                        Comment(
                            " comments\n",
                        ),
                        29..41,
                    ),
                ),
                29..41,
            ),
            (
                Import(
                    (
                        false,
                        50..56,
                    ),
                    (
                        "import",
                        50..56,
                    ),
                    (
                        ImportSpecific(
                            [],
                        ),
                        57..59,
                    ),
                    (
                        "from",
                        60..64,
                    ),
                    (
                        "test.ab",
                        66..73,
                    ),
                ),
                50..74,
            ),
            (
                FunctionDefinition(
                    (
                        false,
                        85..88,
                    ),
                    (
                        "fun",
                        85..88,
                    ),
                    (
                        "test_cat_cmd",
                        89..101,
                    ),
                    [
                        (
                            Typed(
                                (
                                    "file",
                                    102..106,
                                ),
                                (
                                    "Text",
                                    108..112,
                                ),
                            ),
                            102..112,
                        ),
                    ],
                    Some(
                        (
                            "CmdText",
                            115..122,
                        ),
                    ),
                    [
                        (
                            Return(
                                None,
                            ),
                            137..143,
                        ),
                        (
                            Error,
                            144..149,
                        ),
                        (
                            Expression(
                                (
                                    Gt(
                                        (
                                            Text(
                                                [
                                                    (
                                                        Text(
                                                            (
                                                                "NOT",
                                                                151..154,
                                                            ),
                                                        ),
                                                        151..154,
                                                    ),
                                                    (
                                                        Text(
                                                            (
                                                                "READY",
                                                                155..160,
                                                            ),
                                                        ),
                                                        155..160,
                                                    ),
                                                ],
                                            ),
                                            150..161,
                                        ),
                                        (
                                            Error,
                                            164..165,
                                        ),
                                    ),
                                    150..165,
                                ),
                            ),
                            150..165,
                        ),
                        (
                            Expression(
                                (
                                    Var(
                                        (
                                            "file",
                                            165..169,
                                        ),
                                    ),
                                    165..169,
                                ),
                            ),
                            165..169,
                        ),
                    ],
                ),
                85..170,
            ),
            (
                FunctionDefinition(
                    (
                        false,
                        191..194,
                    ),
                    (
                        "fun",
                        191..194,
                    ),
                    (
                        "foo",
                        195..198,
                    ),
                    [
                        (
                            Generic(
                                (
                                    "a",
                                    199..200,
                                ),
                            ),
                            199..200,
                        ),
                    ],
                    None,
                    [
                        (
                            Return(
                                Some(
                                    (
                                        Text(
                                            [
                                                (
                                                    Text(
                                                        (
                                                            "echo",
                                                            224..228,
                                                        ),
                                                    ),
                                                    224..228,
                                                ),
                                                (
                                                    Escape(
                                                        (
                                                            "\"",
                                                            229..231,
                                                        ),
                                                    ),
                                                    229..231,
                                                ),
                                                (
                                                    Expression(
                                                        (
                                                            Add(
                                                                (
                                                                    Number(
                                                                        (
                                                                            5.0,
                                                                            232..233,
                                                                        ),
                                                                    ),
                                                                    232..233,
                                                                ),
                                                                (
                                                                    Number(
                                                                        (
                                                                            5.0,
                                                                            236..237,
                                                                        ),
                                                                    ),
                                                                    236..237,
                                                                ),
                                                            ),
                                                            232..237,
                                                        ),
                                                    ),
                                                    231..238,
                                                ),
                                                (
                                                    Escape(
                                                        (
                                                            "\"",
                                                            238..240,
                                                        ),
                                                    ),
                                                    238..240,
                                                ),
                                            ],
                                        ),
                                        223..241,
                                    ),
                                ),
                            ),
                            216..242,
                        ),
                    ],
                ),
                191..252,
            ),
            (
                Statement(
                    (
                        CommandModifier(
                            (
                                Unsafe,
                                262..268,
                            ),
                        ),
                        262..268,
                    ),
                ),
                262..268,
            ),
            (
                Statement(
                    (
                        Block(
                            (
                                Block(
                                    [
                                        (
                                            VariableInit(
                                                (
                                                    "x",
                                                    287..288,
                                                ),
                                                (
                                                    Number(
                                                        (
                                                            5.0,
                                                            291..292,
                                                        ),
                                                    ),
                                                    291..292,
                                                ),
                                            ),
                                            283..293,
                                        ),
                                        (
                                            Echo(
                                                (
                                                    Var(
                                                        (
                                                            "x",
                                                            312..313,
                                                        ),
                                                    ),
                                                    312..313,
                                                ),
                                            ),
                                            307..314,
                                        ),
                                        (
                                            IfChain(
                                                [
                                                    (
                                                        IfCondition(
                                                            (
                                                                IfCondition(
                                                                    (
                                                                        Eq(
                                                                            (
                                                                                Number(
                                                                                    (
                                                                                        2.0,
                                                                                        349..350,
                                                                                    ),
                                                                                ),
                                                                                349..350,
                                                                            ),
                                                                            (
                                                                                Number(
                                                                                    (
                                                                                        2.0,
                                                                                        354..355,
                                                                                    ),
                                                                                ),
                                                                                354..355,
                                                                            ),
                                                                        ),
                                                                        349..355,
                                                                    ),
                                                                    (
                                                                        Block(
                                                                            [
                                                                                (
                                                                                    Echo(
                                                                                        (
                                                                                            Number(
                                                                                                (
                                                                                                    3.0,
                                                                                                    383..384,
                                                                                                ),
                                                                                            ),
                                                                                            383..384,
                                                                                        ),
                                                                                    ),
                                                                                    378..384,
                                                                                ),
                                                                            ],
                                                                        ),
                                                                        356..402,
                                                                    ),
                                                                ),
                                                                349..402,
                                                            ),
                                                        ),
                                                        349..402,
                                                    ),
                                                    (
                                                        Else(
                                                            (
                                                                InlineElse(
                                                                    (
                                                                        Expression(
                                                                            (
                                                                                Number(
                                                                                    (
                                                                                        5.0,
                                                                                        425..426,
                                                                                    ),
                                                                                ),
                                                                                425..426,
                                                                            ),
                                                                        ),
                                                                        425..426,
                                                                    ),
                                                                ),
                                                                419..426,
                                                            ),
                                                        ),
                                                        419..426,
                                                    ),
                                                ],
                                            ),
                                            328..440,
                                        ),
                                    ],
                                ),
                                269..450,
                            ),
                        ),
                        269..450,
                    ),
                ),
                269..450,
            ),
        ],
    ),
    [
        Simple {
            span: 144..149,
            reason: Unexpected,
            expected: {
                Some(
                    Token(
                        "true",
                    ),
                ),
                Some(
                    Token(
                        "not",
                    ),
                ),
                Some(
                    Token(
                        "echo",
                    ),
                ),
                Some(
                    Token(
                        "continue",
                    ),
                ),
                Some(
                    Token(
                        "false",
                    ),
                ),
                Some(
                    Token(
                        "unsafe",
                    ),
                ),
                Some(
                    Token(
                        "return",
                    ),
                ),
                Some(
                    Token(
                        "nameof",
                    ),
                ),
                Some(
                    Token(
                        "(",
                    ),
                ),
                Some(
                    Token(
                        "status",
                    ),
                ),
                Some(
                    Token(
                        "let",
                    ),
                ),
                Some(
                    Token(
                        "break",
                    ),
                ),
                Some(
                    Token(
                        "{",
                    ),
                ),
                Some(
                    Token(
                        "\"",
                    ),
                ),
                Some(
                    Token(
                        "-",
                    ),
                ),
                Some(
                    Token(
                        "$",
                    ),
                ),
                Some(
                    Token(
                        "silent",
                    ),
                ),
                Some(
                    Token(
                        "if",
                    ),
                ),
                Some(
                    Token(
                        "fail",
                    ),
                ),
                Some(
                    Token(
                        "loop",
                    ),
                ),
                Some(
                    Token(
                        "[",
                    ),
                ),
                Some(
                    Token(
                        "null",
                    ),
                ),
            },
            found: Some(
                Token(
                    "`echo",
                ),
            ),
            label: Some(
                "expression",
            ),
        },
        Simple {
            span: 164..165,
            reason: Unexpected,
            expected: {
                Some(
                    Token(
                        "true",
                    ),
                ),
                Some(
                    Token(
                        "\"",
                    ),
                ),
                Some(
                    Token(
                        "not",
                    ),
                ),
                Some(
                    Token(
                        "(",
                    ),
                ),
                Some(
                    Token(
                        "false",
                    ),
                ),
                Some(
                    Token(
                        "nameof",
                    ),
                ),
                Some(
                    Token(
                        "[",
                    ),
                ),
                Some(
                    Token(
                        "status",
                    ),
                ),
                Some(
                    Token(
                        "$",
                    ),
                ),
                Some(
                    Token(
                        "-",
                    ),
                ),
                Some(
                    Token(
                        "null",
                    ),
                ),
            },
            found: Some(
                Token(
                    "{",
                ),
            ),
            label: Some(
                "expression",
            ),
        },
        Simple {
            span: 170..171,
            reason: Unexpected,
            expected: {
                Some(
                    Token(
                        "true",
                    ),
                ),
                Some(
                    Token(
                        "not",
                    ),
                ),
                Some(
                    Token(
                        "null",
                    ),
                ),
                Some(
                    Token(
                        "continue",
                    ),
                ),
                Some(
                    Token(
                        "false",
                    ),
                ),
                Some(
                    Token(
                        "unsafe",
                    ),
                ),
                Some(
                    Token(
                        "return",
                    ),
                ),
                Some(
                    Token(
                        "import",
                    ),
                ),
                Some(
                    Token(
                        "nameof",
                    ),
                ),
                Some(
                    Token(
                        "status",
                    ),
                ),
                Some(
                    Token(
                        "pub",
                    ),
                ),
                Some(
                    Token(
                        "(",
                    ),
                ),
                Some(
                    Token(
                        "let",
                    ),
                ),
                Some(
                    Token(
                        "break",
                    ),
                ),
                Some(
                    Token(
                        "{",
                    ),
                ),
                Some(
                    Token(
                        "main",
                    ),
                ),
                Some(
                    Token(
                        "\"",
                    ),
                ),
                Some(
                    Token(
                        "-",
                    ),
                ),
                Some(
                    Token(
                        "$",
                    ),
                ),
                Some(
                    Token(
                        "silent",
                    ),
                ),
                Some(
                    Token(
                        "if",
                    ),
                ),
                Some(
                    Token(
                        "fail",
                    ),
                ),
                Some(
                    Token(
                        "fun",
                    ),
                ),
                Some(
                    Token(
                        "loop",
                    ),
                ),
                Some(
                    Token(
                        "[",
                    ),
                ),
                Some(
                    Token(
                        "echo",
                    ),
                ),
            },
            found: Some(
                Token(
                    "`",
                ),
            ),
            label: Some(
                "expression",
            ),
        },
    ],
)
